package solution;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.NoSuchElementException;

public class FlatteningIterator implements Iterator<String>{
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		List<String> l1 = new ArrayList<String>();
		l1.add("a");
	}
	
	private List<Iterator<String>> iterators = null;
	private boolean hasMoreElements = false;;
	private int currentItIndex = 0;
	
	public FlatteningIterator(Iterator<Iterator<String>> input) {
		iterators = new ArrayList<Iterator<String>>();
		while (input.hasNext()) {
			iterators.add(input.next());
		}
		if (iterators.size() > 0)
			hasMoreElements = true;
	}
	
	@Override
	public String next() {
		if (!hasMoreElements)
			throw new NoSuchElementException();
		
		String str = iterators.get(currentItIndex).next();
		
		int iteratorsSize = iterators.size(), increment = 1;
		currentItIndex = (currentItIndex + increment) % iteratorsSize;
		while (!iterators.get(currentItIndex).hasNext()) {
			increment++;
			if (increment >= iteratorsSize) {
				hasMoreElements = false;
				break;
			}
			currentItIndex = (currentItIndex + increment) % iteratorsSize;
		}
		
		return str;
	}
	
	@Override
	public boolean hasNext() {
		return hasMoreElements;
	}

	@Override
	public void remove() {
		// TODO Auto-generated method stub
		throw new UnsupportedOperationException();
	}

}
